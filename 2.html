<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="jquery-3.3.1.js"></script>
    <link rel="stylesheet" type="text/css" href="eition.css">
</head>
<body>
    
    <div id="eition"><div id="eition_range"></div></div>
    <input type="file" name="file" id="imgFile" onchange="imgPreview(this)" />
<script>


        var drag = document.getElementById('eition_range');
        drag.onmousedown = function(e) {  
            var e = e || window.event; 
            var diffX = e.clientX - drag.offsetLeft; 
            var diffY = e.clientY - drag.offsetTop;  
            if(typeof drag.setCapture!='undefined'){ drag.setCapture(); }  
            document.onmousemove = function(e) {  
                var e = e || window.event;
                var left=e.clientX-diffX;  
                var top=e.clientY-diffY;  
                if(left<0){  
                    left=0;
                }else if(left >$("#eition").width()-drag.offsetWidth){  
                    left = $("#eition").width()-drag.offsetWidth;  
                }  
                if(top<0){
                    top=0;  
                }else if(top >$("#eition").height()-drag.offsetHeight){  
                    top = $("#eition").height()-drag.offsetHeight;  
                }
            
                drag.style.left = left+ 'px';  
                drag.style.top = top + 'px';  
            };  
            document.onmouseup = function(e) {
                this.onmousemove = null;  
                this.onmouseup = null;
                if(typeof drag.releaseCapture!='undefined'){  
                    drag.releaseCapture();  
                } 
            };  
        };  
   function imgPreview(fileDom){
       
        if(fileDom.files[0]){
        //判断是否支持FileReader
        if (window.FileReader) {
            var reader = new FileReader();
            var file = fileDom.files[0];
            var imageType = /^image\//;
            if (!imageType.test(file.type)) {
                alert("请选择图片！");
                return;
            }
            reader.onload = function(e) {
                $("#eition").css("background-image","url('"+e.target.result+"')");            
            };
            reader.readAsDataURL(file);
             }
             else {
            alert("您的设备不支持图片预览功能，如需该功能请升级您的设备！");
            }
        }
    }




    
    </script>
</body>
</html>